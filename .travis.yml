language: python

python:
  - "2.7"

env:
  matrix:
    - LLVM_VERSION=3.3

before_install:

  - sudo apt-get update -qq
  - sudo apt-get install -qq llvm-$LLVM_VERSION

install:
  - pip install numpy Sphinx coveralls coverage nose pygments

  # install llvmpy
  - git clone git://github.com/llvmpy/llvmpy.git ${HOME}/llvmpy
  - cd ${HOME}/llvmpy
  - LLVM_CONFIG_PATH=/usr/bin/llvm-config-$LLVM_VERSION python setup.py install

  # install opentuner
  - git clone https://github.com/mbdriscoll/opentuner.git ${HOME}/opentuner
  - cd ${HOME}/opentuner
  - sudo apt-get install `cat debian-packages-deps | tr '\n' ' '`

  - git clone git://github.com/ucb-sejits/ctree.git ${HOME}/ctree
  - cd ${HOME}/ctree
  - python setup.py install
  - cd ${TRAVIS_BUILD_DIR}


script:
  - nosetests --verbose --with-coverage
